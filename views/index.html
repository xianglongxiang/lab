<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" href="/img/favicon.png">
    <title>管理项目</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/index.css">
</head>
<body>
<div class="nav">
    <ul>
        <li><a href="#head" title="首屏" class="on"></a></li>
        <li><a href="#detail" title="介绍"></a></li>
        <li><a href="#detail1" title="文档编辑"></a></li>
        <li><a href="#detail2" title="任务分配"></a></li>
        <li><a href="#detail3" title="资源共享"></a></li>
        <li><a href="#detail4" title="项目讨论"></a></li>
    </ul>
</div>
<section class="lab-head">
    <div class="lab-head-title">
        <img class='lab-logo' src="/img/hinoc-logo.png" alt="">
        <p class="lab-logo1">欢迎访问HINOC实验室管理系统！</p>
        <button id="lab-logo2">登陆</button>
        <button id="lab-logo3">注册</button>
    </div>
</section>
<section class="lab-main">
    <p>HINOC系统特色</p>
    <div class="lab-main-detail">
        <div>
            <img src="/img/i4.png" alt="帮助记录">
            <h4>文档编辑</h4>
            文档同时编辑
        </div>
        <div>
            <img src="/img/i3.png" alt="资源共享">
            <h4>资源共享</h4>
            资源上传共享使用
        </div>
        <div>
            <img src="/img/i2.png" alt="issue">
            <h4>issue</h4>
            项目讨论系统
        </div>
    </div>
</section>
<a id="scrollUp" href="#top" title="">
    <span class="glyphicon glyphicon-menu-up"></span>
</a>
<footer>
    <div>
        <p>© zhanfang 2015</p>
        <p>陕ICP备15014665号-1</p>
    </div>
</footer>

<script src="/js/zf/zf.js"></script>
<script src="/js/common.js"></script>
<script type="text/javascript">
    zf.ready(function(){
        var width = zf.getWidth();
        var height = width/1600 * 536 + "px";
        zf(".lab-head").css("height",height);
        zf('.lab-logo').addClass('on');
        zf('.lab-logo1').addClass('on1');
        zf('#lab-logo2').addClass('on2');
        zf('#lab-logo3').addClass('on2');
        var temp = "<div class='modal' style='border-radius: 10px;background:rgba(255,255,255,1)'><div class='modal-header' style='padding: 9px 15px;border-bottom: 1px solid #eee'><h3 style='margin:0'>登陆</h3></div><div class='modal-main' style='padding:15px'><input id='loginname' type='text' name='username' placeholder='用户名' style='display:block;width:25rem;margin: 10px 0px;padding: 6px 12px;border:1px solid #ccc;border-radius: 4px;'><input id='loginpass' type='password' name='password' placeholder='密码' style='display:block;width:25rem;margin: 10px 0px;padding: 6px 12px;border:1px solid #ccc;border-radius: 4px;'></div><div class='modal-footer' style='padding:14px 15px 15px;background-color: #f5f5f5;border-top:1px solid #ddd;box-shadow: inset 0 1px 0 #ffffff;border-bottom-left-radius:10px;border-bottom-right-radius:10px;overflow: hidden;'><button class='btn-green' style='float: right' onclick='login()'>Submit</button><button class='btn-white' style='margin-right: 10px; float: right;' onclick='removeCon()'>Close</button></div></div>";

        var temp1 = "<div class='modal' style='border-radius: 10px;background:rgba(255,255,255,1)'><div class='modal-header' style='padding: 9px 15px;border-bottom: 1px solid #eee'><h3 style='margin:0'>注册</h3></div><div class='modal-main' style='padding:15px'><input id='username' type='text' name='username' placeholder='用户名' style='display:block;width:25rem;margin: 10px 0px;padding: 6px 12px;border:1px solid #ccc;border-radius: 4px;'><input id='password' type='password' name='password' placeholder='密码' style='display:block;width:25rem;margin: 10px 0px;padding: 6px 12px;border:1px solid #ccc;border-radius: 4px;'><input id='repassword' type='password' name='repassword' placeholder='确认密码' style='display:block;width:25rem;margin: 10px 0px;padding: 6px 12px;border:1px solid #ccc;border-radius: 4px;'></div><div class='modal-footer' style='padding:14px 15px 15px;background-color: #f5f5f5;border-top:1px solid #ddd;box-shadow: inset 0 1px 0 #ffffff;border-bottom-left-radius:10px;border-bottom-right-radius:10px;overflow: hidden;'><button class='btn-green' style='float: right' onclick='register()'>Submit</button><button class='btn-white' style='margin-right: 10px; float: right;' onclick='removeCon()'>Close</button></div></div>";
        zf('#lab-logo2').bind('click',function(){
            msgbox(temp,'',520,456);
            zf('.msg').addClass('on3');
        });
        zf('#lab-logo3').bind('click',function(){
            msgbox(temp1,'',520,456);
            zf('.msg').addClass('on3');
        });
    });

    function register(){
        var username = zf('#username')[0].value;
        var password = zf('#password')[0].value;
        var repassword = zf('#repassword')[0].value;
        if(repassword !== password){
            alert("确认密码和密码不相符！");
        }else{
            var data = {"username":username,"password":password};
            zf.ajax({url:'/register',type:'POST',data:data,success:function(data){
                if(data.state == -3){
                    alert("用户已注册！");
                } else if(data.state == 1){
                    alert("注册成功，请等待审核！");
                }
            }});
        }
    }

    function login(){
        var username = zf('#loginname')[0].value;
        var password = zf('#loginpass')[0].value;

        var data = {"username":username,"password":password};
        zf.ajax({url:'/login',type:'POST',data:data,success:function(data){
            if(data.state == -1){
                alert("用户不存在，请注册！");
            } else if(data.state == -2){
                alert("密码不正确，请重新输入");
            } else if(data.state == -4){
                alert("用户未通过审核，请联系管理员");
            } else if(data.state == 1){
                window.location.href = "/issues";
            }
        }});
    }
</script>
</body>
</html>